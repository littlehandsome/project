"use strict";var reg=/id=(\d+)/;reg.test(location.search)||(location.href="../html/list.html");var id=reg.exec(location.search)[1],container=document.querySelector(".containers");function renderHtml(n){container.innerHTML='\n        <ol class="breadcrumb">\n        <li><a href="#">详情</a></li>\n    </ol>\n    <div class="show">\n        <img src="'+n.simg+'">\n        <div class="mask"></div>\n        <div class="big"><img src="'+n.simg+'" alt="" class="bigImg"></div>\n    </div>\n    <div class="m4" >\n        <h4 class="media-heading">'+n.name+'\n        </h4>\n        <div class="price">\n            <i class="glyphicon glyphicon-yen"></i>\n            <span>'+n.price+'</span>\n        </div>\n        <div class="btn-group" role="group" aria-label="...">\n            <button type="button" class="btn btn-default">38</button>\n            <button type="button" class="btn btn-default">39</button>\n            <button type="button" class="btn btn-default">40</button>\n            <button type="button" class="btn btn-default">41</button>\n            <button type="button" class="btn btn-default">42</button>\n        </div>\n\n        <div>\n            <button class="btn btn-warning btn-lg" id="goCar">立即购买</button>\n            <button class="btn btn-danger btn-lg" id="addCar">加入购物车</button>\n        </div>\n    </div>'}pAjax({url:"../api/getDetail.php",data:{id:id}}).then(function(n){console.log(n),renderHtml(n.detail)}),container.onclick=function(){var n=window.event;"goCar"==n.target.id&&(location.href="../html/car.html"),"addCar"==n.target.id&&((n=localStorage.getItem("login"))?pAjax({url:"../api/addCarData.php",data:{username:n,goods_id:id}}).then(function(n){console.log(n)}):location.href="../html/login.html")},$(".containers").on("mouseover",".show",function(){$(".containers").find(".mask").show(),$(".containers").find(".big").show()}),$(".containers").on("mouseout",".show",function(){$(".containers").find(".mask").hide(),$(".containers").find(".big").hide()}),$(".containers").on("mousemove",".show",function(){var n=window.event,t=n.pageX-this.offsetLeft,i=n.pageY-this.offsetTop,a=t-$(".containers").find(".mask").width()/2,n=i-$(".containers").find(".mask").height()/2,t=$(".containers").find(".show").width()-$(".containers").find(".mask").width(),i=$(".containers").find(".show").height()-$(".containers").find(".mask").height();a<=0?a=0:t<=a&&(a=t),n<=0?n=0:i<=n&&(n=i),$(".containers").find(".mask").css("left",a+"px"),$(".containers").find(".mask").css("top",n+"px");t=a*($(".containers").find(".bigImg").width()-$(".containers").find(".big").width())/t,i=n*($(".containers").find(".bigImg").height()-$(".containers").find(".big").height())/i;$(".containers").find(".bigImg").css("left",-t+"px"),$(".containers").find(".bigImg").css("top",-i+"px")});