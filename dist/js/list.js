"use strict";var getData=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,pAjax({url:"../api/gotData.php",data:{start:defaultInfo.num,len:defaultInfo.len}});case 2:t=n.sent,console.log(t),console.log(t.list),renderHtml(t.list),pai(t.list);case 7:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();function _asyncToGenerator(n){return function(){var l=n.apply(this,arguments);return new Promise(function(i,o){return function t(n,e){try{var a=l[n](e),r=a.value}catch(n){return void o(n)}if(!a.done)return Promise.resolve(r).then(function(n){t("next",n)},function(n){t("throw",n)});i(r)}("next")})}}var list=document.querySelector(".list"),page=document.querySelector(".page"),defaultInfo={len:20,num:1};function renderHtml(n){var e="";n.forEach(function(n,t){e+=' <li class="list-item">\n        \n        <div class="row">\n            <div>\n                <div class="thumbnail">\n                    <img src="'+n.img+'"\n                        alt="...">\n                    <div class="caption">\n                        <h3>'+n.name+'</h3>\n                        <div class="price">\n                            <i class="glyphicon glyphicon-yen"></i>\n                            <span>'+n.price+'</span>\n                        </div>\n                        <p>\n                            <a href="./car.html" class="btn btn-primary" role="button">查看购物车</a>\n                            <a href="./detail.html?id='+n.pid+'" class="btn btn-info" role="button">查看商品详情</a>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </li>'}),list.innerHTML=e}function pai(n){$("#jiagedown").on("click",function(){n.sort(function(n,t){return t.price-n.price}),renderHtml(n)}),$("#jiageup").on("click",function(){n.sort(function(n,t){return n.price-t.price}),renderHtml(n)})}pAjax({url:"../api/gotData.php",data:{start:defaultInfo.num,len:defaultInfo.len}}).then(function(n){new Pagination(page,{pageInfo:{pagenum:1,pagesize:defaultInfo.len,total:n.total,totalpage:Math.ceil(n.total/defaultInfo.len)},textInfo:{first:"首页",prev:"上一页",list:"",next:"下一页",last:"最后一页"},change:function(n){defaultInfo.num=n,getData(),scrollTo(0,0)}})}),$("#an").on("click",function(){$.get("../api/sousuo.php",{name:$("#sousuo").val()},function(n){console.log(n),renderHtml(n)},"json")});